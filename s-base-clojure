#!/usr/bin/env bash

# Debug Options
set -euo pipefail

BIN=$HOME/.local/bin

[[ -x $(command -v guix) ]] && guix install clojure clojure-tools

# Install/Prepare Lein
if [[ ! -x $BIN/bb ]]; then
    URL="https://raw.githubusercontent.com/babashka/babashka/master/install"
    INSTALL_PATH="/tmp/install"

    wget -c $URL -P /tmp
    sed -i 's+/usr/local/bin+$HOME/.local/bin+g' "$INSTALL_PATH"
    bash "$INSTALL_PATH"
fi

# Install/Prepare Lein
if [[ ! -x $BIN/lein ]]; then
    URL="https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein"
    wget -c $URL -P "$BIN"
    chmod +x "$BIN/lein"
fi
