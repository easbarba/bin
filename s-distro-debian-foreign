#!/usr/bin/env bash

# DEBUG OPTIONS
set -euo pipefail

DEPS=(sudo apt flatpak)
s-checkdeps "${DEPS[@]}"

s-echo "Foreign packages"

if [[ ! -x $(command -v flatpak) ]]; then
	$INSTALL flatpak gnome-software-plugin-flatpak
	sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
fi

if [[ ! -x $(command -v insomnia) ]]; then
	echo "deb [trusted=yes arch=amd64] https://download.konghq.com/insomnia-ubuntu/ default all" |
		sudo tee -a /etc/apt/sources.list.d/insomnia.list

	# Refresh repository sources and install Insomnia
	sudo apt-get update
	sudo apt-get install insomnia
fi

exit

DEB_GET_LOCATION=$HOME/.local/bin/deb-get
if [[ -e "$DEB_GET_LOCATION" ]]; then
	wget -c https://raw.githubusercontent.com/wimpysworld/deb-get/main/deb-get -O "$DEB_GET_LOCATION"
	chmod +x "$DEB_GET_LOCATION"
fi
